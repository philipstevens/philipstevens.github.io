<div class="lead-capture-box" id="lead-capture">
  <p class="lead-capture-description"><strong>Free: LLM Production Readiness Kit</strong></p>
  <p class="lead-capture-subtitle">Get the Production Readiness Checklist plus all three offer briefs (Audit, Build & Fix, Keep it Stable), everything you need to assess where you stand and what it would take to ship with confidence.</p>

  <form
    action="https://script.google.com/macros/s/AKfycbwsGuKomWjQTU60wsHW2GAySY169c0TO--06edsSW4I3XUfwMopgdcYdj2X3wy9j73E/exec"
    method="post"
    class="checklist-form"
    id="lead_form"
    target="lead_hidden_iframe"
    onsubmit="leadCaptureSubmit(event)"
  >
    <div class="form-row">
      <input
        type="email"
        name="email"
        id="email"
        placeholder="you@company.com"
        required
        autocomplete="email"
      />
      <button type="submit" class="btn btn--primary">Submit</button>
    </div>

    <!-- honeypot -->
    <input
      type="text"
      name="company"
      tabindex="-1"
      autocomplete="off"
      aria-hidden="true"
      style="position:absolute;left:-9999px;opacity:0;height:0;width:0;"
    />
    <input type="hidden" name="k" value="formkey_QidffT6hpBTjEE38dkn2pbCvfCmebUJn" />
    <input type="hidden" name="source" value="{{ include.source | default: 'unknown' }}" />
    <input type="hidden" name="ua" id="lead_ua" />
  </form>

  <iframe name="lead_hidden_iframe" style="display:none"></iframe>

  <div id="lead_success" class="lead-capture-success" style="display:none">
    <p><strong>Sent! Check your inbox.</strong></p>
    <p class="lead-capture-secondary">
      Found gaps? <a href="https://calendly.com/philipstevens4/intro">Book an intro call</a> to discuss how to close them.
    </p>
    <p class="lead-capture-fallback">
      Didn't arrive? Email <a href="mailto:philipstevens4@gmail.com?subject=Checklist%20PDF%20request">philipstevens4@gmail.com</a> and I'll send it manually.
    </p>
  </div>

</div>

<script>
  (function () {
    var uaField = document.getElementById("lead_ua");
    if (uaField) uaField.value = navigator.userAgent;

    // Track source from offer brief buttons
    document.querySelectorAll('a[data-source]').forEach(function(link) {
      link.addEventListener('click', function() {
        var source = this.getAttribute('data-source');
        var sourceField = document.querySelector('input[name="source"]');
        if (sourceField && source) {
          sourceField.value = source;
        }
      });
    });
  })();

  function leadCaptureSubmit(e) {
    var form = document.getElementById("lead_form");
    var success = document.getElementById("lead_success");
    if (form) form.style.display = "none";
    if (success) success.style.display = "block";
  }
</script>
